<template>
  <div class="form">
    <div class="form-name">
      <div class="form-name-wrapper">
        <!-- 姓 -->
        <FormLabel :title="'姓'" />
        <FormInput
          :type="'text'"
          :placeholder="'姓'"
          :value="firstName"
          @input="firstName = $event"
        />
      </div>
      <div class="form-name-wrapper">
        <!-- 名 -->
        <FormLabel :title="'名'" />
        <FormInput
          :type="'text'"
          :placeholder="'名'"
          :value="lastName"
          @input="lastName = $event"
        />
      </div>
    </div>
    <!-- メールアドレス -->
    <FormLabel :title="'メールアドレス'" />
    <FormInput
      :type="'email'"
      :placeholder="'メールアドレス'"
      :value="email"
      @input="email = $event"
    />
    <!-- お問い合わせ内容 -->
    <!-- 送信ボタン -->
    <button @click="testButton()">ボタン</button>
  </div>
</template>

<script>
import FormInput from '@/components/Atoms/FormInput.vue';
import FormLabel from '@/components/Atoms/FormLabel.vue';

export default {
  components: {
    FormInput,
    FormLabel,
  },
  data() {
    return {
      firstName: '',
      lastName: '',
      email: '',
    };
  },
  mounted() {
    window.liff.init({
      liffId: process.env.LIFF_ID,
    });
  },
  methods: {
    testButton() {
      if (!liff.isInClient()) {
        alert('外部ブラウザまたはLINE内ブラウザで動作させている');
      } else {
        alert('LIFFブラウザで動作させている');
        // メッセージを送る
        liff.sendMessages([
          {
            type: 'text',
            text: `お問い合わせありがとうございます。\n\n---お問い合わせ内容---\n姓：${this.firstName}\n名：${this.lastName}\nメールアドレス：${this.email}\n`,
          },
        ]);
        // アプリを閉じる
        liff.closeWindow();
      }
    },
  },
};
</script>

<style lang="scss" scoped>
.form {
  display: flex;
  flex-direction: column;
  justify-content: center;
  max-width: 400px;
  width: 100%;

  &-name {
    display: flex;
    justify-content: space-between;

    &-wrapper {
      width: calc(50% - 10px);
    }
  }
}
</style>
